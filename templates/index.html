<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bullshit Detector</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        }
        
        .card {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            transform: translateY(-2px);
        }
        
        .input-field {
            background: rgba(15, 23, 42, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            transition: all 0.3s ease;
        }
        
        .submit-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.5);
        }
        
        .confidence-bar {
            height: 8px;
            background: #334155;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .confidence-level {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease-out;
        }
        
        .truth-high {
            background: linear-gradient(90deg, #22c55e, #16a34a);
        }
        
        .truth-medium {
            background: linear-gradient(90deg, #eab308, #ca8a04);
        }
        
        .truth-low {
            background: linear-gradient(90deg, #ef4444, #dc2626);
        }
        
        .model-response {
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }
        
        .model-openai {
            border-left-color: #10b981;
        }
        
        .model-claude {
            border-left-color: #8b5cf6;
        }
        
        .model-gemini {
            border-left-color: #f59e0b;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
            }
            70% {
                box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
            }
        }
        
        .loader {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 3px solid #3b82f6;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <header class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">
                Bullshit Detector
            </h1>
            <p class="text-gray-400 text-lg max-w-2xl mx-auto">
                Verify claims across multiple AI models to detect truth from misinformation
            </p>
        </header>
        
        <div class="max-w-4xl mx-auto mb-12">
            <div class="card rounded-xl p-6 shadow-lg">
                <form id="query-form" class="space-y-4">
                    <div>
                        <label for="query" class="block text-sm font-medium text-gray-300 mb-2">Enter a claim to verify</label>
                        <div class="relative">
                            <input 
                                type="text" 
                                id="query" 
                                name="query" 
                                class="input-field w-full py-3 px-4 rounded-lg focus:outline-none" 
                                placeholder="Ex: Was the moon landing faked?"
                                required
                            >
                            <button 
                                type="submit" 
                                class="submit-btn absolute right-2 top-2 rounded-lg px-4 py-1 text-white font-medium"
                            >
                                Verify
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        <div id="results" class="max-w-4xl mx-auto hidden">
            <div class="card rounded-xl p-6 shadow-lg mb-8">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6">
                    <div>
                        <h2 class="text-xl font-semibold mb-1" id="claim-text">Was the moon landing faked?</h2>
                        <div class="flex items-center">
                            <div id="verdict-badge" class="px-3 py-1 rounded-full bg-green-500 text-white text-sm font-medium mr-3">
                                FALSE
                            </div>
                            <div class="text-sm text-gray-400">Confidence:</div>
                        </div>
                    </div>
                    <div class="mt-4 md:mt-0 w-full md:w-1/3">
                        <div class="confidence-bar">
                            <div id="confidence-level" class="confidence-level truth-high" style="width: 95%"></div>
                        </div>
                        <div class="flex justify-between mt-1 text-xs text-gray-400">
                            <span>Low</span>
                            <span>Medium</span>
                            <span>High</span>
                        </div>
                    </div>
                </div>
                
                <div id="model-responses" class="space-y-4">
                    <!-- GPT-4o Response -->
                    <div class="model-response model-openai bg-gray-800 bg-opacity-50 rounded-lg p-4">
                        <div class="flex items-center mb-3">
                            <div class="w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-teal-500 flex items-center justify-center mr-3">
                                <i class="fas fa-robot text-white"></i>
                            </div>
                            <div>
                                <h3 class="font-medium">GPT-4o</h3>
                                <div class="text-xs text-gray-400">OpenAI</div>
                            </div>
                        </div>
                        <p id="gpt-response" class="text-gray-300">
                            FALSE. The moon landing was not faked. The Apollo missions, conducted by NASA, successfully landed astronauts on the moon six times between 1969 and 1972. These missions have been extensively documented and verified by scientists and experts worldwide.
                        </p>
                    </div>
                    
                    <!-- Claude Response -->
                    <div class="model-response model-claude bg-gray-800 bg-opacity-50 rounded-lg p-4">
                        <div class="flex items-center mb-3">
                            <div class="w-8 h-8 rounded-full bg-gradient-to-r from-purple-400 to-indigo-500 flex items-center justify-center mr-3">
                                <i class="fas fa-robot text-white"></i>
                            </div>
                            <div>
                                <h3 class="font-medium">Claude 3</h3>
                                <div class="text-xs text-gray-400">Anthropic</div>
                            </div>
                        </div>
                        <p id="claude-response" class="text-gray-300">
                            FALSE. The Apollo 11 mission successfully landed on the moon on July 20, 1969. There is overwhelming evidence that confirms the moon landings were real events and not faked.
                        </p>
                    </div>
                </div>
            </div>
            
            <div class="flex justify-between items-center">
                <button id="new-query-btn" class="text-blue-400 flex items-center">
                    <i class="fas fa-arrow-left mr-2"></i> New Query
                </button>
                <div class="flex space-x-4">
                    <button class="text-gray-400 hover:text-white transition">
                        <i class="fas fa-share-alt"></i>
                    </button>
                    <button class="text-gray-400 hover:text-white transition">
                        <i class="fas fa-download"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div id="loading" class="max-w-4xl mx-auto text-center py-12 hidden">
            <div class="loader mx-auto mb-4"></div>
            <p class="text-gray-400">Analyzing with multiple AI models...</p>
        </div>
        
        <footer class="mt-16 text-center text-gray-500 text-sm">
            <p>© 2025 Bullshit Detector - AI-powered misinformation detection</p>
        </footer>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const queryForm = document.getElementById('query-form');
            const resultsSection = document.getElementById('results');
            const loadingSection = document.getElementById('loading');
            const newQueryBtn = document.getElementById('new-query-btn');
            const claimText = document.getElementById('claim-text');
            const gptResponse = document.getElementById('gpt-response');
            const claudeResponse = document.getElementById('claude-response');
            const verdictBadge = document.getElementById('verdict-badge');
            const confidenceLevel = document.getElementById('confidence-level');
            
            queryForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const query = document.getElementById('query').value;
                
                if (query.trim() === '') return;
                
                // Show loading
                resultsSection.classList.add('hidden');
                loadingSection.classList.remove('hidden');
                
                // Make API request
                fetch('/ask', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ query: query }),
                })
                .then(response => response.json())
                .then(data => {
                    // Update UI with results
                    claimText.textContent = data.query;
                    
                    // Update model responses
                    if (data.responses['gpt-4o'].success) {
                        gptResponse.textContent = data.responses['gpt-4o'].content;
                    } else {
                        gptResponse.textContent = 'Error retrieving response.';
                        gptResponse.classList.add('text-red-400');
                    }
                    
                    if (data.responses['claude-3'].success) {
                        claudeResponse.textContent = data.responses['claude-3'].content;
                    } else {
                        claudeResponse.textContent = 'Error retrieving response.';
                        claudeResponse.classList.add('text-red-400');
                    }
                    
                    // Determine verdict (simplified version)
                    const gptText = data.responses['gpt-4o'].content || '';
                    const claudeText = data.responses['claude-3'].content || '';
                    
                    let verdict = 'UNCERTAIN';
                    let confidenceWidth = '50%';
                    let confidenceClass = 'truth-medium';
                    
                    // Simple check for TRUE/FALSE in both responses
                    const gptTrue = gptText.toUpperCase().includes('TRUE') && !gptText.toUpperCase().includes('FALSE');
                    const gptFalse = gptText.toUpperCase().includes('FALSE');
                    const claudeTrue = claudeText.toUpperCase().includes('TRUE') && !claudeText.toUpperCase().includes('FALSE');
                    const claudeFalse = claudeText.toUpperCase().includes('FALSE');
                    
                    if ((gptTrue && claudeTrue) || (gptFalse && claudeFalse)) {
                        // Agreement
                        verdict = gptTrue ? 'TRUE' : 'FALSE';
                        confidenceWidth = '95%';
                        confidenceClass = verdict === 'TRUE' ? 'truth-high' : 'truth-high';
                    } else if (gptTrue || claudeTrue) {
                        // Some evidence of truth
                        verdict = 'POSSIBLY TRUE';
                        confidenceWidth = '60%';
                        confidenceClass = 'truth-medium';
                    } else if (gptFalse || claudeFalse) {
                        // Some evidence of falsehood
                        verdict = 'LIKELY FALSE';
                        confidenceWidth = '75%';
                        confidenceClass = 'truth-medium';
                    }
                    
                    // Update UI with verdict
                    verdictBadge.textContent = verdict;
                    
                    // Update badge color
                    verdictBadge.className = 'px-3 py-1 rounded-full text-white text-sm font-medium mr-3';
                    if (verdict === 'TRUE' || verdict === 'FALSE') {
                        verdictBadge.classList.add(verdict === 'TRUE' ? 'bg-green-500' : 'bg-red-500');
                    } else {
                        verdictBadge.classList.add('bg-yellow-500');
                    }
                    
                    // Update confidence bar
                    confidenceLevel.style.width = confidenceWidth;
                    confidenceLevel.className = 'confidence-level ' + confidenceClass;
                    
                    // Show results
                    loadingSection.classList.add('hidden');
                    resultsSection.classList.remove('hidden');
                })
                .catch(error => {
                    console.error('Error:', error);
                    loadingSection.classList.add('hidden');
                    alert('An error occurred while processing your request.');
                });
            });
            
            newQueryBtn.addEventListener('click', function() {
                resultsSection.classList.add('hidden');
                document.getElementById('query').value = '';
                document.getElementById('query').focus();
            });
        });
    </script>
</body>
</html>
